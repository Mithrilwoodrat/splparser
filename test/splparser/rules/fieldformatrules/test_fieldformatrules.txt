
Below are clips from an interactive session in which I test various aspects of the parser.

>>> import splparser.parser

>>> splparser.parse('fieldformat Bandwidth=if(Bandwidth>=1024,if(Bandwidth>=1048576,if(Bandwidth>=1073741824,if(Bandwidth>=1099511627776,(tostring(round(Bandwidth/1024/1024/1024/1024,2))+" TB"),(tostring(round(Bandwidth/1024/1024/1024,2))+" GB")),(tostring(round(Bandwidth/1024/1024,2))+" MB")),(tostring(round(Bandwidth/1024,2))+" KB")),(tostring(Bandwidth)+" b"))').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': 'Bandwidth')
                ('IF')
                    ('GE')
                        ('FIELD': 'Bandwidth')
                        ('VALUE': '1024')
                    ('IF')
                        ('GE')
                            ('FIELD': 'Bandwidth')
                            ('VALUE': '1048576')
                        ('IF')
                            ('GE')
                                ('FIELD': 'Bandwidth')
                                ('VALUE': '1073741824')
                            ('IF')
                                ('GE')
                                    ('FIELD': 'Bandwidth')
                                    ('VALUE': '1099511627776')
                                ('PLUS')
                                    ('TOSTRING')
                                        ('ROUND')
                                            ('DIVIDES')
                                                ('DIVIDES')
                                                    ('DIVIDES')
                                                        ('DIVIDES')
                                                            ('FIELD': 'Bandwidth')
                                                            ('VALUE': '1024')
                                                        ('VALUE': '1024')
                                                    ('VALUE': '1024')
                                                ('VALUE': '1024')
                                            ('VALUE': '2')
                                    ('VALUE': '" TB"')
                                ('PLUS')
                                    ('TOSTRING')
                                        ('ROUND')
                                            ('DIVIDES')
                                                ('DIVIDES')
                                                    ('DIVIDES')
                                                        ('FIELD': 'Bandwidth')
                                                        ('VALUE': '1024')
                                                    ('VALUE': '1024')
                                                ('VALUE': '1024')
                                            ('VALUE': '2')
                                    ('VALUE': '" GB"')
                            ('PLUS')
                                ('TOSTRING')
                                    ('ROUND')
                                        ('DIVIDES')
                                            ('DIVIDES')
                                                ('FIELD': 'Bandwidth')
                                                ('VALUE': '1024')
                                            ('VALUE': '1024')
                                        ('VALUE': '2')
                                ('VALUE': '" MB"')
                        ('PLUS')
                            ('TOSTRING')
                                ('ROUND')
                                    ('DIVIDES')
                                        ('FIELD': 'Bandwidth')
                                        ('VALUE': '1024')
                                    ('VALUE': '2')
                            ('VALUE': '" KB"')
                    ('PLUS')
                        ('TOSTRING')
                            ('FIELD': 'Bandwidth')
                        ('VALUE': '" b"')

>>> splparser.parse('fieldformat start_time = strftime(end_time, "%H:%M:%S")').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': 'start_time')
                ('STRFTIME')
                    ('FIELD': 'end_time')
                    ('VALUE': '"%H:%M:%S"')

>>> splparser.parse('fieldformat Charges=tostring(Charges,"commas") . " $"').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': 'Charges')
                ('CONCAT')
                    ('TOSTRING')
                        ('FIELD': 'Charges')
                        ('VALUE': '"commas"')
                    ('VALUE': '" $"')

>>> splparser.parse('fieldformat date_hour = if(date_hour > 12,tostring(date_hour - 12) + "PM", date_hour + "AM")').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': 'date_hour')
                ('IF')
                    ('GT')
                        ('FIELD': 'date_hour')
                        ('VALUE': '12')
                    ('PLUS')
                        ('TOSTRING')
                            ('MINUS')
                                ('FIELD': 'date_hour')
                                ('VALUE': '12')
                        ('VALUE': '"PM"')
                    ('PLUS')
                        ('FIELD': 'date_hour')
                        ('VALUE': '"AM"')

>>> splparser.parse('fieldformat Usage=Usage_in_Percent+ "%"').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': 'Usage')
                ('PLUS')
                    ('FIELD': 'Usage_in_Percent')
                    ('VALUE': '"%"')

>>> splparser.parse('fieldformat "Total Upload MB" = tostring("Total Upload MB", "commas") + "MB"').print_tree()
('ROOT')
    ('STAGE')
        ('FIELDFORMAT')
            ('EQ')
                ('FIELD': '"Total Upload MB"')
                ('PLUS')
                    ('TOSTRING')
                        ('FIELD': '"Total Upload MB"')
                        ('VALUE': '"commas"')
                    ('VALUE': '"MB"')
