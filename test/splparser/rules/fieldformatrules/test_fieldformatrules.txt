
Below are clips from an interactive session in which I test various aspects of the parser.

>>> import splparser.parser

>>> splparser.parse('fieldformat Bandwidth=if(Bandwidth>=1024,if(Bandwidth>=1048576,if(Bandwidth>=1073741824,if(Bandwidth>=1099511627776,(tostring(round(Bandwidth/1024/1024/1024/1024,2))+" TB"),(tostring(round(Bandwidth/1024/1024/1024,2))+" GB")),(tostring(round(Bandwidth/1024/1024,2))+" MB")),(tostring(round(Bandwidth/1024,2))+" KB")),(tostring(Bandwidth)+" b"))').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': 'Bandwidth')
                ('FUNCTION': 'if')
                    ('FUNCTION': 'ge')
                        ('FIELD': 'Bandwidth')
                        ('VALUE': '1024')
                    ('FUNCTION': 'if')
                        ('FUNCTION': 'ge')
                            ('FIELD': 'Bandwidth')
                            ('VALUE': '1048576')
                        ('FUNCTION': 'if')
                            ('FUNCTION': 'ge')
                                ('FIELD': 'Bandwidth')
                                ('VALUE': '1073741824')
                            ('FUNCTION': 'if')
                                ('FUNCTION': 'ge')
                                    ('FIELD': 'Bandwidth')
                                    ('VALUE': '1099511627776')
                                ('FUNCTION': 'concat')
                                    ('FUNCTION': 'tostring')
                                        ('FUNCTION': 'round')
                                            ('FUNCTION': 'divides')
                                                ('FUNCTION': 'divides')
                                                    ('FUNCTION': 'divides')
                                                        ('FUNCTION': 'divides')
                                                            ('FIELD': 'Bandwidth')
                                                            ('VALUE': '1024')
                                                        ('VALUE': '1024')
                                                    ('VALUE': '1024')
                                                ('VALUE': '1024')
                                            ('VALUE': '2')
                                    ('VALUE': '" TB"')
                                ('FUNCTION': 'concat')
                                    ('FUNCTION': 'tostring')
                                        ('FUNCTION': 'round')
                                            ('FUNCTION': 'divides')
                                                ('FUNCTION': 'divides')
                                                    ('FUNCTION': 'divides')
                                                        ('FIELD': 'Bandwidth')
                                                        ('VALUE': '1024')
                                                    ('VALUE': '1024')
                                                ('VALUE': '1024')
                                            ('VALUE': '2')
                                    ('VALUE': '" GB"')
                            ('FUNCTION': 'concat')
                                ('FUNCTION': 'tostring')
                                    ('FUNCTION': 'round')
                                        ('FUNCTION': 'divides')
                                            ('FUNCTION': 'divides')
                                                ('FIELD': 'Bandwidth')
                                                ('VALUE': '1024')
                                            ('VALUE': '1024')
                                        ('VALUE': '2')
                                ('VALUE': '" MB"')
                        ('FUNCTION': 'concat')
                            ('FUNCTION': 'tostring')
                                ('FUNCTION': 'round')
                                    ('FUNCTION': 'divides')
                                        ('FIELD': 'Bandwidth')
                                        ('VALUE': '1024')
                                    ('VALUE': '2')
                            ('VALUE': '" KB"')
                    ('FUNCTION': 'concat')
                        ('FUNCTION': 'tostring')
                            ('FIELD': 'Bandwidth')
                        ('VALUE': '" b"')

>>> splparser.parse('fieldformat start_time = strftime(end_time, "%H:%M:%S")').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': 'start_time')
                ('FUNCTION': 'strftime')
                    ('FIELD': 'end_time')
                    ('VALUE': '"%H:%M:%S"')

>>> splparser.parse('fieldformat Charges=tostring(Charges,"commas") . " $"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': 'Charges')
                ('FUNCTION': 'concat')
                    ('FUNCTION': 'tostring')
                        ('FIELD': 'Charges')
                        ('VALUE': '"commas"')
                    ('VALUE': '" $"')

>>> splparser.parse('fieldformat date_hour = if(date_hour > 12,tostring(date_hour - 12) + "PM", date_hour + "AM")').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': 'date_hour')
                ('FUNCTION': 'if')
                    ('FUNCTION': 'gt')
                        ('FIELD': 'date_hour')
                        ('VALUE': '12')
                    ('FUNCTION': 'concat')
                        ('FUNCTION': 'tostring')
                            ('FUNCTION': 'minus')
                                ('FIELD': 'date_hour')
                                ('VALUE': '12')
                        ('VALUE': '"PM"')
                    ('FUNCTION': 'concat')
                        ('FIELD': 'date_hour')
                        ('VALUE': '"AM"')

>>> splparser.parse('fieldformat Usage=Usage_in_Percent+ "%"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': 'Usage')
                ('FUNCTION': 'concat')
                    ('FIELD': 'Usage_in_Percent')
                    ('VALUE': '"%"')

>>> splparser.parse('fieldformat "Total Upload MB" = tostring("Total Upload MB", "commas") + "MB"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': '"Total Upload MB"')
                ('FUNCTION': 'concat')
                    ('FUNCTION': 'tostring')
                        ('FIELD': '"Total Upload MB"')
                        ('VALUE': '"commas"')
                    ('VALUE': '"MB"')


>>> splparser.parse('''fieldformat "Last Connected"=strftime('Last Connected', "%D %H:%M:%S %p")''').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'fieldformat')
            ('EQ': 'assign')
                ('FIELD': '"Last Connected"')
                ('FUNCTION': 'strftime')
                    ('VALUE': ''Last Connected'')
                    ('VALUE': '"%D %H:%M:%S %p"')
