
Below are clips from an interactive session in which I test various aspects of the parser.

>>> import splparser.parser

>>> splparser.parse("chart sum(A) by A span=log2").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('SUM')
                ('FIELD': 'A')
                ('BY')
                    ('FIELD': 'A')
            ('EQ')
                ('OPTION': 'span')
                ('VALUE': 'log2')

>>> splparser.parse('chart count(eval(method="GET")) AS GET, count(eval(method="POST")) AS POST by host').print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'method')
                        ('VALUE': '"GET"')
                ('AS')
                    ('FIELD': 'GET')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'method')
                        ('VALUE': '"POST"')
                ('AS')
                    ('FIELD': 'POST')
                ('BY')
                    ('FIELD': 'host')

>>> splparser.parse("chart count by duration span=log2").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('BY')
                    ('FIELD': 'duration')
            ('EQ')
                ('OPTION': 'span')
                ('VALUE': 'log2')

>>> splparser.parse("chart avg(eventcount) by duration span=log2").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('AVG')
                ('FIELD': 'eventcount')
                ('BY')
                    ('FIELD': 'duration')
            ('EQ')
                ('OPTION': 'span')
                ('VALUE': 'log2')

>>> splparser.parse("chart dc(clientip) over date_hour by category_id usenull=f").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('DC')
                ('FIELD': 'clientip')
                ('OVER')
                    ('FIELD': 'date_hour')
                ('BY')
                    ('FIELD': 'category_id')
            ('EQ')
                ('OPTION': 'usenull')
                ('VALUE': 'f')

>>> splparser.parse("chart count over Magnitude by Region useother=f").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('OVER')
                    ('FIELD': 'Magnitude')
                ('BY')
                    ('FIELD': 'Region')
            ('EQ')
                ('OPTION': 'useother')
                ('VALUE': 'f')

>>> splparser.parse("chart max(delay) over foo").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('MAX')
                ('FIELD': 'delay')
                ('OVER')
                    ('FIELD': 'foo')

>>> splparser.parse("chart eval(avg(size)/max(delay)) AS ratio by host user").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('EVAL')
                ('DIVIDES')
                    ('AVG')
                        ('FIELD': 'size')
                    ('MAX')
                        ('FIELD': 'delay')
                ('AS')
                    ('FIELD': 'ratio')
                ('BY')
                    ('FIELD': 'host')
                    ('FIELD': 'user')

>>> splparser.parse("chart max(delay) by size bins=10").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('MAX')
                ('FIELD': 'delay')
                ('BY')
                    ('FIELD': 'size')
            ('EQ')
                ('OPTION': 'bins')
                ('VALUE': '10')

>>> splparser.parse('chart count(eval(OnAccessRead="false")) as OnAccessRead count(eval(OnAccessWrite="false")) as OnAccessWrite count(eval(OnAccessRename="false")) as OnAccessRename count(eval(OnAccessCleanup="false")) as OnAccessCleanup count(eval(OnAccessSuspect="false")) as OnAccessSuspect count(eval(HIPSSuspect="false")) as HIPSSuspect count(eval(HIPSBlock="true")) as HIPSBlock count(eval(BOEPEnabled="false")) as BOEPEnabled by ConsoleName').print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'OnAccessRead')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'OnAccessRead')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'OnAccessWrite')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'OnAccessWrite')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'OnAccessRename')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'OnAccessRename')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'OnAccessCleanup')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'OnAccessCleanup')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'OnAccessSuspect')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'OnAccessSuspect')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'HIPSSuspect')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'HIPSSuspect')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'HIPSBlock')
                        ('VALUE': '"true"')
                ('AS')
                    ('FIELD': 'HIPSBlock')
            ('COUNT')
                ('EVAL')
                    ('EQ')
                        ('FIELD': 'BOEPEnabled')
                        ('VALUE': '"false"')
                ('AS')
                    ('FIELD': 'BOEPEnabled')
                ('BY')
                    ('FIELD': 'ConsoleName')

TODO: Should this last by apply to the whole list?

>>> splparser.parse("chart count() by host").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('BY')
                    ('FIELD': 'host')

>>> splparser.parse('chart limit=8 dc(id) AS "Tempfails" BY  rcptdom').print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('EQ')
                ('OPTION': 'limit')
                ('VALUE': '8')
            ('DC')
                ('FIELD': 'id')
                ('AS')
                    ('FIELD': '"Tempfails"')
                ('BY')
                    ('FIELD': 'rcptdom')

>>> splparser.parse("chart sum(cpuTime) sum(runTime) sum(cacheTime) sum(networkWriteTime) stdev(cpuTime) stdev(runTime) stdev(cacheTime) stdev(networkWriteTime) count over methodName").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('SUM')
                ('FIELD': 'cpuTime')
            ('SUM')
                ('FIELD': 'runTime')
            ('SUM')
                ('FIELD': 'cacheTime')
            ('SUM')
                ('FIELD': 'networkWriteTime')
            ('STDEV')
                ('FIELD': 'cpuTime')
            ('STDEV')
                ('FIELD': 'runTime')
            ('STDEV')
                ('FIELD': 'cacheTime')
            ('STDEV')
                ('FIELD': 'networkWriteTime')
            ('COUNT')
                ('OVER')
                    ('FIELD': 'methodName')

This was in the logs but I can't verify that it's allowable: splparser.parse('chart "Total Upload MB" over SSL by DOMAIN').print_tree()

>>> splparser.parse('chart sparkline sum("Client2ServerBytes") as "MB" by DOMAIN').print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('SPARKLINE')
                ('SUM')
                    ('FIELD': '"Client2ServerBytes"')
                ('AS')
                    ('FIELD': '"MB"')
                ('BY')
                    ('FIELD': 'DOMAIN')

I don't think this should be allowed either: splparser.parse("chart span=1d top 20 logRecordType").print_tree()

>>> splparser.parse("chart count (SHORT_EVT_NAME) over LENDERFIELD").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
                ('FIELD': 'SHORT_EVT_NAME')
                ('OVER')
                    ('FIELD': 'LENDERFIELD')

>>> splparser.parse("chart perc97(duration) as Laufzeit by firma").print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('PERC97')
                ('FIELD': 'duration')
                ('AS')
                    ('FIELD': 'Laufzeit')
                ('BY')
                    ('FIELD': 'firma')

>>> splparser.parse('chart count, eval(eval(action="deliver") + eval(action="render"))  as Render by action').print_tree()
('ROOT')
    ('STAGE')
        ('CHART')
            ('COUNT')
            ('EVAL')
                ('EVAL')
                    ('PLUS')
                        ('EQ')
                            ('FIELD': 'action')
                            ('VALUE': '"deliver"')
                        ('EVAL')
                            ('EQ')
                                ('FIELD': 'action')
                                ('VALUE': '"render"')
                ('AS')
                    ('FIELD': 'Render')
                ('BY')
                    ('FIELD': 'action')

Also in data set but probably not allowed: splparser.parse("chart (get_request)  as COUNT").print_tree()
