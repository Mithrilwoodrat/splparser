
Below are clips from an interactive session in which I test various aspects of the parser.

>>> import splparser.parser

>>> splparser.parse("rename ip_address as dest_host").print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FIELD': 'ip_address')
                ('FIELD': 'dest_host')

>>> splparser.parse("rename cdi_city as city, cdi_country as country, cdi_business as user_business, dest_ip as ip, dest_host as hostname, cdi_subbusiness as user_businessunit").print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FIELD': 'cdi_city')
                ('FIELD': 'city')
            ('FUNCTION': 'rename')
                ('FIELD': 'cdi_country')
                ('FIELD': 'country')
            ('FUNCTION': 'rename')
                ('FIELD': 'cdi_business')
                ('FIELD': 'user_business')
            ('FUNCTION': 'rename')
                ('FIELD': 'dest_ip')
                ('FIELD': 'ip')
            ('FUNCTION': 'rename')
                ('FIELD': 'dest_host')
                ('FIELD': 'hostname')
            ('FUNCTION': 'rename')
                ('FIELD': 'cdi_subbusiness')
                ('FIELD': 'user_businessunit')

>>> splparser.parse("rename count(Type) as Failures").print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FUNCTION': 'count')
                    ('FIELD': 'Type')
                ('FIELD': 'Failures')

>>> splparser.parse('rename _time as "Time Logged In"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('INTERNAL_FIELD': '_time')
                ('FIELD': '"Time Logged In"')

>>> splparser.parse('rename atLeast25 as "25%-50% of Video Viewed", atLeast50 as "50%-100% of Video Viewed", full as "Full Video Viewed", starts as "0%-25% of Video Viewed", all as "Total Video Views", completionRate as "Completion Rate", start_time as "Start Time", end_time as "End Time"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FIELD': 'atLeast25')
                ('FIELD': '"25%-50% of Video Viewed"')
            ('FUNCTION': 'rename')
                ('FIELD': 'atLeast50')
                ('FIELD': '"50%-100% of Video Viewed"')
            ('FUNCTION': 'rename')
                ('FIELD': 'full')
                ('FIELD': '"Full Video Viewed"')
            ('FUNCTION': 'rename')
                ('FIELD': 'starts')
                ('FIELD': '"0%-25% of Video Viewed"')
            ('FUNCTION': 'rename')
                ('FIELD': 'all')
                ('FIELD': '"Total Video Views"')
            ('FUNCTION': 'rename')
                ('FIELD': 'completionRate')
                ('FIELD': '"Completion Rate"')
            ('FUNCTION': 'rename')
                ('FIELD': 'start_time')
                ('FIELD': '"Start Time"')
            ('FUNCTION': 'rename')
                ('FIELD': 'end_time')
                ('FIELD': '"End Time"')

>>> splparser.parse('rename avg(memUsedPct) as "Used Mem", avg(memFreePct) as Free_Mem').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FUNCTION': 'avg')
                    ('FIELD': 'memUsedPct')
                ('FIELD': '"Used Mem"')
            ('FUNCTION': 'rename')
                ('FUNCTION': 'avg')
                    ('FIELD': 'memFreePct')
                ('FIELD': 'Free_Mem')

>>> splparser.parse('rename sum(CounterValue) as "PE Total"').print_tree()
('ROOT')
    ('STAGE')
        ('COMMAND': 'rename')
            ('FUNCTION': 'rename')
                ('FUNCTION': 'sum')
                    ('FIELD': 'CounterValue')
                ('FIELD': '"PE Total"')
