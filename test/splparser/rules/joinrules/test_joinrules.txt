>>> import splparser

>>> splparser.parse("join [search foo]").print_tree()
('ROOT')
    ('STAGE')
        ('JOIN')
            ('SUBSEARCH')
                ('ROOT')
                    ('STAGE')
                        ('SEARCH')
                            ('WORD': 'foo')

>>> splparser.parse("join type=inner [search test | sort test]").print_tree()
('ROOT')
    ('STAGE')
        ('JOIN')
            ('TYPE')
                ('WORD': 'inner')
            ('SUBSEARCH')
                ('ROOT')
                    ('STAGE')
                        ('SEARCH')
                            ('WORD': 'test')
                    ('STAGE')
                        ('SORT')
                            ('ASCENDING')
                                ('WORD': 'test')

>>> splparser.parse("join type=outer usetime=true earlier=false overwrite=true max=100 field1 field2 [search test | sort test | top 5 lol by rofl]").print_tree()
('ROOT')
    ('STAGE')
        ('JOIN')
            ('TYPE')
                ('WORD': 'outer')
            ('USETIME')
                ('WORD': 'true')
            ('EARLIER')
                ('WORD': 'false')
            ('OVERWRITE')
                ('WORD': 'true')
            ('MAX')
                ('INT': '100')
            ('_FIELDLIST')
                ('ID': 'field1')
                ('ID': 'field2')
            ('SUBSEARCH')
                ('ROOT')
                    ('STAGE')
                        ('SEARCH')
                            ('WORD': 'test')
                    ('STAGE')
                        ('SORT')
                            ('ASCENDING')
                                ('WORD': 'test')
                    ('STAGE')
                        ('TOP')
                            ('INT': '5')
                            ('WORD': 'lol')
                            ('BY')
                                ('WORD': 'rofl')
