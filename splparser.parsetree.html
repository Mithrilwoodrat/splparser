<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>splparser.parsetree &mdash; splparser 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="splparser 0.3.0 documentation" href="index.html" />
    <link rel="up" title="API documentation" href="documentation.html" />
    <link rel="next" title="splparser.parser" href="splparser.parser.html" />
    <link rel="prev" title="API documentation" href="documentation.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="splparser.parser.html" title="splparser.parser"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="documentation.html" title="API documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">splparser 0.3.0 documentation</a> &raquo;</li>
          <li><a href="documentation.html" accesskey="U">API documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-splparser.parsetree">
<span id="splparser-parsetree"></span><h1>splparser.parsetree<a class="headerlink" href="#module-splparser.parsetree" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.__init__">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">__init__</tt><big>(</big><em>role</em>, <em>nodetype='SPL'</em>, <em>raw=''</em>, <em>is_associative=False</em>, <em>is_argument=False</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The constructor for ParseTreeNode</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>role</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The &#8216;type&#8217; of node represented; e.g., ROOT, STAGE, COMMAND, FUNCTION, FIELD</li>
<li><strong>nodetype</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The data type of the node value; only applies to FIELD and VALUE roles</li>
<li><strong>raw</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The value of the parsed element</li>
<li><strong>is_associative</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether the node value is an associative operator; only applies to FUNCTION roles</li>
<li><strong>is_argument</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether the node value is an argument versus part of the SPL language</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ParseTreeNode</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;TYPE&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;raw&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">role</span>
<span class="go">&#39;TYPE&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">raw</span>
<span class="go">&#39;raw&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">children</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">parent</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="splparser.parsetree.ParseTreeNode">
<em class="property">class </em><tt class="descclassname">splparser.parsetree.</tt><tt class="descname">ParseTreeNode</tt><big>(</big><em>role</em>, <em>nodetype='SPL'</em>, <em>raw=''</em>, <em>is_associative=False</em>, <em>is_argument=False</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode" title="Permalink to this definition">¶</a></dt>
<dd><p>A node in a parse tree representing a single parsed element.</p>
<p>The parse function in splparser returns a ParseTreeNode representing the root node of a parse tree.</p>
<dl class="class">
<dt id="splparser.parsetree.ParseTreeNode.ParseTreeNodeEncoder">
<em class="property">class </em><tt class="descname">ParseTreeNodeEncoder</tt><big>(</big><em>skipkeys=False</em>, <em>ensure_ascii=True</em>, <em>check_circular=True</em>, <em>allow_nan=True</em>, <em>sort_keys=False</em>, <em>indent=None</em>, <em>separators=None</em>, <em>encoding='utf-8'</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ParseTreeNodeEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that knows how to decode a JSON string representing a ParseTreeNode.</p>
<p>This needs to be passed to the json module load or loads functions to
tell it how to decode a ParseTreeNode object.</p>
<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.ParseTreeNodeEncoder.default">
<tt class="descname">default</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ParseTreeNodeEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that must be implemented to decode the JSON string.</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.add_child">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">add_child</tt><big>(</big><em>child</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.add_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given ParseTreeNode as a child to the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>child</strong> (<em>ParseTreeNode</em>) &#8211; The node to add as a child of the current node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.add_children">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">add_children</tt><big>(</big><em>children</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.add_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Add each of the ParseTreeNodes in the given list as a child of the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>children</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; The nodes to add as children of the current node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;PARENT&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;b&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">add_children</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">children</span>
<span class="go">[{role: &#39;CHILD&#39;, raw: &#39;x&#39;, children: [(&#39;CHILD&#39;: &#39;a&#39;), (&#39;CHILD&#39;: &#39;b&#39;), (&#39;CHILD&#39;: &#39;c&#39;)], parent: (&#39;PARENT&#39;)}, {role: &#39;CHILD&#39;, raw: &#39;y&#39;, children: [], parent: (&#39;PARENT&#39;)}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">children</span>
<span class="go">[{role: &#39;CHILD&#39;, raw: &#39;a&#39;, children: [], parent: (&#39;CHILD&#39;: &#39;x&#39;)}, {role: &#39;CHILD&#39;, raw: &#39;b&#39;, children: [], parent: (&#39;CHILD&#39;: &#39;x&#39;)}, {role: &#39;CHILD&#39;, raw: &#39;c&#39;, children: [], parent: (&#39;CHILD&#39;: &#39;x&#39;)}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.ancestral_branch">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">ancestral_branch</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ancestral_branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of all the nodes along the current branch above the current node.</p>
<p>This function traverses up the tree from the current node, while making
a copy of the nodes along the path, finally returning the top-most node
on the branch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.ancestral_command">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">ancestral_command</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ancestral_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first node that is an ancestor of the current one and has role=&#8221;COMMAND&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.ancestral_function">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">ancestral_function</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ancestral_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first node that is an ancestor of the current one and has role=&#8221;COMMAND&#8221; or role=&#8221;FUNCTION&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.ast">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">ast</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.ast" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the tree rearranged to correspond to the order operations would be executed in.</p>
<p>This function creates a copy of the tree starting at the current node
and rearranges the subtrees so that the operations are in an order
that more closely corresponds to the order in which they should be
applied to the data.</p>
<p>This is an experimental function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.clear_children">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">clear_children</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.clear_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all children from the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.command_argument_tuple_list">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">command_argument_tuple_list</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.command_argument_tuple_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of (command, arguments) pairs from the subtree starting at the current node.</p>
<p>Traverse the subtree starting at the current node and extract the
arguments for each Splunk command, returning a list of
(command, argument) tuples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.compile">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">compile</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a list of operations to apply to execute the given query.</p>
<p>This function takes a ParseTreeNode representing a query and &#8220;compiles&#8221;
it into a list of single transformations to apply to the arguments in 
the query. It actually returns a dictionary whose keys represent the
variable to compute and whose values represent the operations needed to
compute that variable.</p>
<p>This is an experimental function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.copy_node">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">copy_node</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.copy_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a copy of the current node but not its children.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.copy_tree">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">copy_tree</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.copy_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively copy the entire tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.descendant_arguments">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">descendant_arguments</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.descendant_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all argument nodes from the subtree of the current node.</p>
<p>This function traverses the subtree starting from the current node and
returns a list of nodes that have is_argument set to True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.drop_options">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">drop_options</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.drop_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new tree with the subtrees of the current node that represent option parameters removed.</p>
<p>This function traverses a copy of the subtree starting at the current node and
removes all subtrees that represent option clauses. It does this by
removing nodes whose role is &#8220;OPTION&#8221; or whose role is &#8220;EQ&#8221; and whose
first child is &#8220;OPTION&#8221;. The reasoning for why one might want to 
remove option clauses is that often these are not very important to 
the functioning of the query so if you wanted to count how many queries
of a certain type there are you might want to ignore the options when
doing this accounting.</p>
<p>This is similar to the drop_rename function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.drop_rename">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">drop_rename</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.drop_rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new tree with the subtrees of the current node that represent rename clauses removed.</p>
<p>This function creates a copy of the tree starting at the current node
and removes all subtrees from that copy that represent rename clauses.
This includes nodes whose role is &#8220;FUNCTION&#8221; and whose raw value is &#8220;as&#8221;.
The reasoning for why one might want to do this is that renaming is
something that is often done for asthetic reasons and thus is not
integral to the transformations the query is applying to the data. So if
you wanted to tally similarity across a set of queries you might want
to ignore rename operations.</p>
<p>This is similar to the drop_options function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.dumps">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">dumps</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the current object to a JSON-encoded string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>kwargs</strong> &#8211; Keyword arguments that are passed to json.dumps</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.extract_fields">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">extract_fields</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.extract_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of nodes in the subtree starting at the current node that have role=&#8221;FIELD&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.extract_values">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">extract_values</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.extract_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of nodes in the subtree starting at the current node that have role=&#8221;VALUE&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.flatten">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">flatten</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a ParseTreeNode to a flattened string representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="splparser.parsetree.ParseTreeNode.from_dict">
<em class="property">static </em><tt class="descclassname">ParseTreeNode.</tt><tt class="descname">from_dict</tt><big>(</big><em>d</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively convert a dict representing a ParseTreeNode to a ParseTreeNode.</p>
<p>This function creates a ParseTreeNode from a dict whose contents are the
attributes and values of the object. It recursively performs this operation
on the &#8220;children&#8221; key.</p>
<p>This is the inverse function of the function jsonify.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>d</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; A dictionary that corresponds to a ParseTreeNode object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.get_datatype">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">get_datatype</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.get_datatype" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the estimated data type of the raw value of the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.get_parent_stage">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">get_parent_stage</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.get_parent_stage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first node that is an ancestor of this one that has role=&#8221;STAGE&#8221;.</p>
<p>This function traverses up the tree from the current node until it 
finds a node whose role is &#8220;STAGE&#8221; and then returns that node. If 
there is no such node then the function returns None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.inverse_skeleton">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">inverse_skeleton</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.inverse_skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a recursive copy of the tree at the current node with all raw values except argument values set to blank.</p>
<p>This function recursively traverses the tree starting at the current 
node and copies it, while setting all non-argument values to blank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.is_eval_function">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">is_eval_function</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.is_eval_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the current node is the start of an eval function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.is_function">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">is_function</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.is_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the current node&#8217;s role is &#8220;FUNCTION&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.is_groupby">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">is_groupby</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.is_groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the current node is the start of a group by clause.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.is_supertree_of">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">is_supertree_of</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.is_supertree_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests whether one tree is a supertree of the other node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>other</strong> (<em>ParseTreeNode</em>) &#8211; The object to compare to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">bool</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.itertree">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">itertree</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.itertree" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through the entire tree depth-first, yielding nodes along the way.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">generator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.jsonify">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">jsonify</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.jsonify" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively convert the ParseTreeNode to types directly convertible to JSON.</p>
<p>This function creates a dict that stores all of the attributes of the given
ParseTreeNode as dict, list, str, int, etc. types. It recursively 
performs this operation on the children ParseTreeNode objects.</p>
<p>This is the inverse function of the function from_dict.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="splparser.parsetree.ParseTreeNode.loads">
<em class="property">static </em><tt class="descclassname">ParseTreeNode.</tt><tt class="descname">loads</tt><big>(</big><em>jsonstr</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a JSON string that corresponds to a ParseTreeNode to a ParseTreeNode.</p>
<p>This converts a str object to a ParseTreeNode if it represents a valid
ParseTreeNode.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jsonstr</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; A string that encodes a ParseTreeNode in JSON format</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.print_tree">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">print_tree</tt><big>(</big><em>recursive=True</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.print_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a string representation of the whole tree starting at the current node.</p>
<p>If recursive is set to False, only the current node is printed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>recursive</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether or not to recurse</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;PARENT&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">print_tree</span><span class="p">()</span>
<span class="go">(&#39;PARENT&#39;)</span>
<span class="go">    (&#39;CHILD&#39;: &#39;x&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;b&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">add_children</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">print_tree</span><span class="p">()</span>
<span class="go">(&#39;PARENT&#39;)</span>
<span class="go">    (&#39;CHILD&#39;: &#39;x&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;a&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;b&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">print_tree</span><span class="p">()</span>
<span class="go">(&#39;PARENT&#39;)</span>
<span class="go">    (&#39;CHILD&#39;: &#39;x&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;a&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;b&#39;)</span>
<span class="go">        (&#39;CHILD&#39;: &#39;c&#39;)</span>
<span class="go">    (&#39;CHILD&#39;: &#39;y&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(&#39;PARENT&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.remove_child">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">remove_child</tt><big>(</big><em>child</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.remove_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the given ParseTreeNode from the children of the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>child</strong> (<em>ParseTreeNode</em>) &#8211; The node to remove from the children of the current node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.remove_children">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">remove_children</tt><big>(</big><em>children</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.remove_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the given list of ParseTreeNodes from the children of the current node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>children</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; The nodes to remove from the children of the current node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;PARENT&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;b&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">add_children</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ParseTreeNode</span><span class="p">(</span><span class="s">&#39;CHILD&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">remove_children</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">children</span>
<span class="go">[{role: &#39;CHILD&#39;, raw: &#39;c&#39;, children: [], parent: (&#39;CHILD&#39;: &#39;x&#39;)}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">remove_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">children</span>
<span class="go">[{role: &#39;CHILD&#39;, raw: &#39;x&#39;, children: [(&#39;CHILD&#39;: &#39;c&#39;)], parent: (&#39;PARENT&#39;)}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">{role: &#39;CHILD&#39;, raw: &#39;a&#39;, children: [], parent: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">{role: &#39;CHILD&#39;, raw: &#39;y&#39;, children: [], parent: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">remove_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;art/splparsetree.py&quot;</span>, line <span class="m">53</span>, in <span class="n">remove_child</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
<span class="gr">ValueError</span>: <span class="n">list.remove(x): x not in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">remove_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">children</span>
<span class="go">[{role: &#39;CHILD&#39;, raw: &#39;x&#39;, children: [(&#39;CHILD&#39;: &#39;c&#39;)], parent: None}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">remove_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">children</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">remove_children</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span>
<span class="go">{role: &#39;PARENT&#39;, raw: &#39;&#39;, children: [], parent: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">{role: &#39;CHILD&#39;, raw: &#39;x&#39;, children: [(&#39;CHILD&#39;: &#39;c&#39;)], parent: None}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.schema">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">schema</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the schema inferred from the query in the subtree starting at the current node.</p>
<p>This is an experimental function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Schema</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.skeleton">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">skeleton</tt><big>(</big><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a recursive copy of the tree at the current node with all raw argument values set to blank.</p>
<p>This function recursively traverses the tree starting at the current 
node and copies it, while setting all argument values to blank.
This makes it possible to compare two queries to see if they are the
same except for their arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ParseTreeNode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.str_tree">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">str_tree</tt><big>(</big><em>recursive=True</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.str_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively create the string representation of the tree starting at the current node.</p>
<p>This function recurses through the tree starting at the current node
and creates a string representation of the tree. Optionally you can
choose to not have the function recurse into the subtree of the node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>recursive</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether or not to recurse</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.swap_children">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">swap_children</tt><big>(</big><em>p</em>, <em>q</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.swap_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a given child node in a tree with another node.</p>
<p>This function replaces the given child node p with the other node q.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>p</strong> (<em>ParseTreeNode</em>) &#8211; The child node to remove and replace with another</li>
<li><strong>q</strong> (<em>ParseTreeNode</em>) &#8211; The child node to add in place of the other</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="splparser.parsetree.ParseTreeNode.template">
<tt class="descclassname">ParseTreeNode.</tt><tt class="descname">template</tt><big>(</big><em>drop_options=False</em>, <em>drop_rename=False</em>, <em>distinguished_argument=None</em><big>)</big><a class="headerlink" href="#splparser.parsetree.ParseTreeNode.template" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces all parameters in a ParseTreeNode tree with generic symbols.</p>
<p>This function takes a ParseTreeNode tree representing a specific query
and converts it to a &#8220;template&#8221; &#8211; the same query with parameters
replaced with generic symbols.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> (<em>ParseTreeNode</em>) &#8211; The current object</li>
<li><strong>drop_options</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether or not to remove options</li>
<li><strong>drop_rename</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether or not to drop rename clauses</li>
<li><strong>distinguished_argument</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; If there is an argument to name 
differently from other variables</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">splparser</a></h1>





<p>
<iframe src="http://ghbtns.com/github-btn.html?user=salspaugh&repo=splparser&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#supported-commands">Supported commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading.html">Downloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using the parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Running the tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="documentation.html">API documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">splparser.parsetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="splparser.parser.html">splparser.parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="splparser.lexers.html">splparser.lexer.toplevellexer</a></li>
</ul>
</li>
</ul>


<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Sara Alspaugh.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.6.1</a>
      
      |
      <a href="_sources/splparser.parsetree.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>